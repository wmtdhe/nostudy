!function(e){function n(n){for(var t,l,i=n[0],c=n[1],u=n[2],d=0,f=[];d<i.length;d++)l=i[d],Object.prototype.hasOwnProperty.call(a,l)&&a[l]&&f.push(a[l][0]),a[l]=0;for(t in c)Object.prototype.hasOwnProperty.call(c,t)&&(e[t]=c[t]);for(s&&s(n);f.length;)f.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,n=0;n<o.length;n++){for(var r=o[n],t=!0,i=1;i<r.length;i++){var c=r[i];0!==a[c]&&(t=!1)}t&&(o.splice(n--,1),e=l(l.s=r[0]))}return e}var t={},a={8:0},o=[];function l(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=e,l.c=t,l.d=function(e,n,r){l.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,n){if(1&n&&(e=l(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)l.d(r,t,function(n){return e[n]}.bind(null,t));return r},l.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(n,"a",n),n},l.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},l.p="";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=n,i=i.slice();for(var u=0;u<i.length;u++)n(i[u]);var s=c;o.push([119,0]),r()}({119:function(e,n,r){"use strict";r.r(n);var t=r(15),a=r.n(t),o=r(0),l=r.n(o),i=r(18),c=r(16),u=r(17),s=r(33),d=r(44),f=r(13),g=r(14),m=r(34),b=r(28),p=r(35),h=(r(40),r(22),Object(p.a)()),v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.d,x=Object(f.e)(b.b,v(Object(f.a)(h)));h.run(m.a);var w=Object(g.b)((function(e){return{blog:e.blog.blogList,blogInfo:e.blog,createdOffset:e.newCreatedBlog.length,newCreatedBlog:e.newCreatedBlog,status:e.LoginStatus}}),(function(e){return{getBlog:function(n){e(Object(m.c)(n,0))},loadMore:function(n,r){e(Object(m.c)(n,r))},publishPost:function(n){e(Object(m.b)(n))}}}))((function(e){Object(o.useEffect)((function(){e.getBlog(0)}),[]);var n=Object(o.useState)(""),r=a()(n,2),t=r[0],i=r[1],f=e.loadMore,g=e.blog,m=e.blogInfo,b=e.createdOffset,p=e.status,h=e.publishPost,v=e.newCreatedBlog;return l.a.createElement(l.a.Fragment,null,l.a.createElement(c.a,null),l.a.createElement("div",{className:"content"},l.a.createElement(d.a,{status:p,publishPost:h,reply:t}),!g&&l.a.createElement("div",{className:"loading"}),g&&0===g.length&&l.a.createElement("div",{className:"no-blog"},"暂无BLOG"),g&&0!==g.length&&l.a.createElement(s.a,{loadMore:f,blog:g,blogInfo:m,createdOffset:b,newCreatedBlog:v,handleReply:function(e,n,r,t){i("//@".concat(r," - ").concat(n," : ").concat(t))}})),l.a.createElement(u.a,null))}));Object(i.render)(l.a.createElement(g.a,{store:x},l.a.createElement(w,null)),document.getElementById("root"),(function(){console.log("square page rendered")}))},16:function(e,n,r){"use strict";var t=r(8),a=r.n(t),o=r(9),l=r.n(o),i=r(10),c=r.n(i),u=r(11),s=r.n(u),d=r(12),f=r.n(d),g=r(0),m=r.n(g),b=r(39),p=r(31),h=r(38),v=r(37),x=function(e){function n(e){return a()(this,n),c()(this,s()(n).call(this,e))}return f()(n,e),l()(n,[{key:"render",value:function(){return m.a.createElement("div",{className:"header"},m.a.createElement("ul",null,m.a.createElement("li",null,m.a.createElement("h1",null,m.a.createElement("a",{href:"/"},"微博"))),m.a.createElement("li",null,m.a.createElement("a",{href:"/"},m.a.createElement(b.a,null),"首页")),m.a.createElement("li",null,m.a.createElement("a",{href:"/profile"},m.a.createElement(p.a,null),"我的空间")),m.a.createElement("li",null,m.a.createElement("a",{href:"/square"},m.a.createElement(h.a,null),"广场")),m.a.createElement("li",null,m.a.createElement("a",{href:"/setting"},m.a.createElement(v.a,null),"设置"))))}}]),n}(m.a.Component);n.a=x},17:function(e,n,r){"use strict";var t=r(8),a=r.n(t),o=r(9),l=r.n(o),i=r(10),c=r.n(i),u=r(11),s=r.n(u),d=r(12),f=r.n(d),g=r(0),m=r.n(g),b=function(e){function n(e){return a()(this,n),c()(this,s()(n).call(this,e))}return f()(n,e),l()(n,[{key:"render",value:function(){return m.a.createElement("div",{className:"footer"},"Footer")}}]),n}(m.a.Component);n.a=b},22:function(e,n,r){var t=r(19),a=r(23);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1},l=(t(a,o),a.locals?a.locals:{});e.exports=l},23:function(e,n,r){(n=r(20)(!1)).push([e.i,"/* http://meyerweb.com/eric/tools/css/reset/\r\n   v2.0 | 20110126\r\n   License: none (public domain)\r\n*/\r\n\r\nhtml, body, div, span, applet, object, iframe,\r\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\r\na, abbr, acronym, address, big, cite, code,\r\ndel, dfn, em, img, ins, kbd, q, s, samp,\r\nsmall, strike, strong, sub, sup, tt, var,\r\nb, u, i, center,\r\ndl, dt, dd, ol, ul, li,\r\nfieldset, form, label, legend,\r\ntable, caption, tbody, tfoot, thead, tr, th, td,\r\narticle, aside, canvas, details, embed,\r\nfigure, figcaption, footer, header, hgroup,\r\nmenu, nav, output, ruby, section, summary,\r\ntime, mark, audio, video {\r\n    margin: 0;\r\n    padding: 0;\r\n    border: 0;\r\n    font-size: 100%;\r\n    font: inherit;\r\n    vertical-align: baseline;\r\n}\r\n/* HTML5 display-role reset for older browsers */\r\narticle, aside, details, figcaption, figure,\r\nfooter, header, hgroup, menu, nav, section {\r\n    display: block;\r\n}\r\nbody {\r\n    line-height: 1;\r\n    font-family: Microsoft YaHei;\r\n}\r\nol, ul {\r\n    list-style: none;\r\n}\r\nblockquote, q {\r\n    quotes: none;\r\n}\r\nblockquote:before, blockquote:after,\r\nq:before, q:after {\r\n    content: '';\r\n    content: none;\r\n}\r\ntable {\r\n    border-collapse: collapse;\r\n    border-spacing: 0;\r\n}\r\n\r\n.header{\r\n    background-color: rgb(251,251,251);\r\n    box-shadow: 0 0 10px rgb(170,170,170);\r\n    padding: 1.5em 1em;\r\n    min-width: 1000px;\r\n}\r\n\r\n.header a{\r\n    color: rgb(51,51,51);\r\n}\r\n.header a:hover{\r\n    color:rgb(250,125,60);\r\n}\r\n\r\n.header ul{\r\n    display: flex;\r\n    flex-flow: row nowrap;\r\n}\r\n\r\n.header ul li{\r\n    margin-right: 1.5em;\r\n}\r\na{\r\n    text-decoration: none;\r\n}\r\n\r\n.load-more{\r\n    width: 100%;\r\n    margin-bottom: 1em;\r\n    background-color: #fff;\r\n    border-radius: 3px;\r\n    padding: 1em 1em;\r\n    box-sizing: border-box;\r\n    text-align: center;\r\n    cursor: pointer;\r\n}\r\n\r\n.content{\r\n    position: relative;\r\n    max-width: 1024px;\r\n    min-width: 1000px;\r\n    margin: 0 auto;\r\n    /*background-color: rgba(150,50,70,0.3);*/\r\n    display: flex;\r\n    flex-flow: row wrap;\r\n    padding: 1em 1em;\r\n    box-sizing: border-box;\r\n    border-left:1px solid #eee;\r\n    border-right:1px solid #eee;\r\n}\r\n\r\n.error{\r\n    height: 90vh;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.error span{\r\n    cursor: pointer;\r\n    color: cornflowerblue;\r\n}\r\n\r\n.footer{\r\n    padding: 1.5em 1em;\r\n    color:#fff;\r\n    text-align: center;\r\n    background-color: rgb(0,0,0);\r\n    min-width: 1000px;\r\n}",""]),e.exports=n},28:function(e,n,r){"use strict";r.d(n,"a",(function(){return l})),r.d(n,"d",(function(){return i})),r.d(n,"c",(function(){return c}));var t=r(42),a=r.n(t),o=r(13),l="UPDATE_LOGIN_STATUS";function i(e){return{type:"PUSH_IN_NEW_BLOG",blog:e}}function c(e){return{type:"CREATE_BLOG",blogInfo:e}}n.b=Object(o.c)({blog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if("PUSH_IN_NEW_BLOG"===n.type){if(e.blogList){var r=e.blogList.concat(n.blog.blogList);return Object.assign({},e,{pageIndex:n.blog.pageIndex},{blogList:r})}return n.blog}return e},newCreatedBlog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"CREATE_BLOG":return[n.blogInfo].concat(a()(e));default:return e}},LoginStatus:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1?arguments[1]:void 0;return n.type===l?n.status:e}})},33:function(e,n,r){"use strict";var t=r(0),a=r.n(t),o=r(56),l=r(57),i=(r(52),r(14));function c(e){var n=e.handleReply,r=e.username,t=e.nickname,i=e.content;return a.a.createElement("div",{className:"blog"},a.a.createElement("div",{className:"blog-userinfo"},a.a.createElement("a",{href:"/profile/".concat(e.username)},a.a.createElement(o.a,{src:e.picture,size:"large"})),a.a.createElement("div",{style:{marginLeft:"1em"}},a.a.createElement("div",{style:{marginBottom:"0.5em"}},a.a.createElement("a",{href:"/profile"},e.nickname)),a.a.createElement("div",null,e.formatedDate))),a.a.createElement("div",{className:"blog-content",dangerouslySetInnerHTML:{__html:e.formatContent}}),a.a.createElement("div",{className:"blog-img"},a.a.createElement("img",{src:e.img,alt:""})),n&&a.a.createElement("div",{className:"blog-function"},a.a.createElement("a",{href:"/",onClick:function(e){e.preventDefault(),n(e,t,r,i)}},a.a.createElement(l.a,null)," 回复")))}n.a=Object(i.b)((function(e,n){return{}}),(function(e){return{}}))((function(e){var n=e.blogInfo,r=n.count,t=n.pageIndex,o=n.pageSize,l=e.loadMore,i=e.createdOffset,u=e.newCreatedBlog,s=e.handleReply,d=e.userName;return a.a.createElement("div",{className:"blog-list"},i>0&&u.map((function(e){return a.a.createElement(c,{key:e.data.id,username:e.data.user.userName,nickname:e.data.user.nickname,formatedDate:e.data.createdAt,content:e.data.content,picture:e.data.user.picture,img:e.data.image,handleReply:s,formatContent:e.data.formatContent})})),e.blog&&e.blog.map((function(e){return a.a.createElement(c,{key:e.id,username:e.user.userName,nickname:e.user.nickName,formatedDate:e.createdAt,content:e.content,picture:e.user.picture,img:e.image,handleReply:s,formatContent:e.formatContent})})),t*o+o<r&&a.a.createElement("div",{className:"load-more",onClick:function(e){console.log("im clicked"),d?l(d,parseInt(t)+1):l(parseInt(t)+1,i)}},"加载更多"))}))},34:function(e,n,r){"use strict";r.d(n,"c",(function(){return m})),r.d(n,"b",(function(){return b})),r.d(n,"a",(function(){return p}));var t=r(2),a=r.n(t),o=r(7),l=r.n(o),i=r(4),c=r(28),u=a.a.mark(f),s=a.a.mark(g),d=a.a.mark(p);function f(e){var n,r,t;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.pageIndex,r=e.createdOffset,a.next=3,l.a.get("http://localhost:3000/api/square/loadMore/".concat(n,"/").concat(r));case 3:return t=a.sent,a.next=6,Object(i.a)(Object(c.d)(t.data.data));case 6:case"end":return a.stop()}}),u)}function g(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.blogInfo,t.next=3,l.a.post("http://localhost:3000/api/blog/create",{content:n.content,image:n.image},{withCredentials:!0});case 3:if(r=t.sent,0!==r.data.errno){t.next=10;break}return t.next=8,Object(i.a)(Object(c.c)(r.data.data));case 8:t.next=12;break;case 10:return t.next=12,Object(i.a)({type:c.a,status:!1});case 12:case"end":return t.stop()}}),s)}function m(e,n){return{type:"GET_SQUARE_BLOG_ASYNC",pageIndex:e,createdOffset:n}}function b(e){return{type:"CREATE_BLOG_ASYNC",blogInfo:e}}function p(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.c)("GET_SQUARE_BLOG_ASYNC",f);case 2:return e.next=4,Object(i.c)("CREATE_BLOG_ASYNC",g);case 4:case"end":return e.stop()}}),d)}},40:function(e,n,r){var t=r(19),a=r(41);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1},l=(t(a,o),a.locals?a.locals:{});e.exports=l},41:function(e,n,r){(n=r(20)(!1)).push([e.i,"\r\n\r\n\r\n\r\n\r\n.input{\r\n    width: 68%;\r\n    box-shadow: 0 0 10px rgb(170,170,170);\r\n    border-radius: 3px;\r\n    background-color: #fff;\r\n    padding: 0.5em;\r\n    box-sizing: border-box;\r\n    margin-bottom: 1em;\r\n}\r\n\r\n#textarea{\r\n    font-size: 1.5em;\r\n    resize:none;\r\n    width: 100%;\r\n    padding: 0.3em;\r\n    box-sizing: border-box;\r\n    margin-bottom: 0.3em;\r\n    box-shadow: inset 0 0 3px rgb(170,170,170);\r\n}\r\n\r\n#textarea:focus{\r\n    outline-color:rgb(250,125,60);\r\n    box-shadow: none;\r\n}\r\n#publish{\r\n    color: #fff;\r\n    border:none;\r\n    float: right;\r\n    padding: 0.5em 1.5em;\r\n    border-radius: 3px;\r\n    font-weight: bold;\r\n}\r\n.no-input{\r\n    background-color:rgba(250,125,60,0.5);\r\n}\r\n.has-input{\r\n    background-color:rgba(250,125,60,1);\r\n    cursor: pointer;\r\n}\r\n\r\n.user-info{\r\n    background-color: #fff;\r\n    box-sizing: border-box;\r\n    width: 30%;\r\n    border-radius: 3px;\r\n    box-shadow: 0 0 10px rgb(170,170,170);\r\n    margin-left: 1em;\r\n    display: flex;\r\n    flex-flow: column nowrap;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.avatar{\r\n    width: 5em;\r\n    height: 5em;\r\n    border-radius: 50%;\r\n    overflow: hidden;\r\n    margin: 1em 0;\r\n}\r\n.avatar img{\r\n    object-fit: cover;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.fan-follows {\r\n    display: flex;\r\n    flex-flow:row nowrap;\r\n    margin: 1em 0;\r\n}\r\n.fan-follows div span{\r\n    display: block;\r\n    border-right: 1px solid rgb(170,170,170);\r\n    text-align: center;\r\n    padding:0 0.5em;\r\n}\r\n.fan-follows div span:nth-of-type(even){\r\n    padding-top: 0.2em;\r\n    color:#aaa;\r\n}\r\n\r\n.fan-follows div span:nth-of-type(odd) a{\r\n    color:#000;\r\n}\r\n.fan-follows div span:nth-of-type(odd) a:hover{\r\n    color:rgba(250,125,60,1);\r\n}\r\n\r\n.follow-button{\r\n    border-radius:3px;\r\n    padding: 0.5em 1em;\r\n    margin-bottom: 1em;\r\n    cursor: pointer;\r\n    color:#fff;\r\n    font-weight: bold;\r\n    background-color:rgba(250,125,60,1);\r\n}\r\n\r\n.blog-list{\r\n    width: 68%;\r\n    min-height: 80vh;\r\n}\r\n\r\n.loading{\r\n    width: 68%;\r\n    min-height: 100vh;\r\n}\r\n/*if no blog posted*/\r\n.no-blog{\r\n    width: 68%;\r\n    min-height: 80vh;\r\n    display: flex;\r\n    flex-flow:row nowrap;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.blog{\r\n    width: 100%;\r\n    margin-bottom: 1em;\r\n    background-color: #fff;\r\n    border-radius: 3px;\r\n    padding: 1.5em 1em;\r\n    box-sizing: border-box;\r\n    box-shadow: 0 0 10px rgb(170,170,170);\r\n}\r\n.blog a{\r\n    color:rgb(100,100,100);\r\n}\r\n.blog-userinfo{\r\n    display: flex;\r\n    flex-flow: row nowrap;\r\n}\r\n.blog-content{\r\n    margin: 1em 0;\r\n    word-wrap: break-word;\r\n}\r\n.blog-content a{\r\n    color:rgb(24,144,255);\r\n}\r\n.blog-img{\r\n    width: 100%;\r\n}\r\n.blog-img img{\r\n    max-width: 100%;\r\n}\r\n\r\n.blog-function {\r\n\r\n}\r\n.blog-function a{\r\n    float: right;\r\n}\r\n\r\n.tribute-container{\r\n    padding: 0.5em;\r\n    box-shadow: 0 0 3px rgb(170,170,170);\r\n    background-color: white;\r\n    font-size: 1em;\r\n}\r\n\r\n.backBtn{\r\n    position:fixed;\r\n    right:4em;\r\n    bottom: 4.5em;\r\n    background-color: #000;\r\n    color:#fff;\r\n    border-radius: 10px;\r\n    z-index: 1000;\r\n    display: none;\r\n    width: 3em;\r\n    height: 3em;\r\n    text-align: center;\r\n    line-height: 3em;\r\n}\r\n\r\n\r\n\r\n",""]),e.exports=n},44:function(e,n,r){"use strict";var t=r(2),a=r.n(t),o=r(30),l=r.n(o),i=r(15),c=r.n(i),u=r(0),s=r.n(u),d=r(14),f=(r(34),r(7)),g=r.n(f),m=r(50),b=r.n(m),p=Object(u.createRef)(),h=Object(u.createRef)();n.a=Object(d.b)((function(e){return{}}),(function(e){return{}}))((function(e){var n=Object(u.useState)(""),r=c()(n,2),t=r[0],o=r[1],i=Object(u.useState)(""),d=c()(i,2),f=d[0],m=d[1],v=e.publishPost,x=e.status;function w(){return(w=l()(a.a.mark((function e(n){var r,t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.current.files[0],(t=new FormData).append("file",r),e.next=5,g.a.post("http://localhost:3000/api/utils/upload",t,{withCredentials:!0}).then((function(e){console.log(e),0!==e.data.errno?(alert(e.data.message),m("")):m(e.data.data.url)})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.useEffect)((function(){if(o(e.reply),setTimeout((function(){!function(e){if(e.setSelectionRange)e.focus(),e.setSelectionRange(0,0);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",0),n.moveStart("character",0),n.select()}}(p.current)}),0),!x){var n=encodeURI(location.pathname);location.href="/login?url=".concat(n)}p.current&&g.a.get("http://localhost:3000/api/user/getAtList",{withCredentials:!0}).then((function(e){if(console.log(e.data),0===e.data.errno){var n=e.data.data.map((function(e){return{key:e,value:e}}));new b.a({values:n}).attach(p.current)}else console.log(0)})).catch((function(e){return console.log(e)}))}),[e.reply,x]),s.a.createElement("div",{className:"input"},s.a.createElement("div",{className:"title"},s.a.createElement("img",{src:"/public/title.png",alt:""})),s.a.createElement("textarea",{name:"",id:"textarea",rows:"4",ref:p,onChange:function(e){var n=p.current.value;o(n)},value:t}),s.a.createElement("input",{type:"file",id:"file",accept:"image/*",ref:h,onChange:function(e){return w.apply(this,arguments)}}),s.a.createElement("button",{id:"publish",className:t?"has-input":"no-input",disabled:!t,onClick:function(e){v({content:p.current.value,image:f}),p.current.value="",h.current.value="",m("")}},"发布"))}))}});