!function(e){function n(n){for(var t,l,i=n[0],c=n[1],u=n[2],f=0,d=[];f<i.length;f++)l=i[f],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&d.push(o[l][0]),o[l]=0;for(t in c)Object.prototype.hasOwnProperty.call(c,t)&&(e[t]=c[t]);for(s&&s(n);d.length;)d.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,n=0;n<a.length;n++){for(var r=a[n],t=!0,i=1;i<r.length;i++){var c=r[i];0!==o[c]&&(t=!1)}t&&(a.splice(n--,1),e=l(l.s=r[0]))}return e}var t={},o={5:0},a=[];function l(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=e,l.c=t,l.d=function(e,n,r){l.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,n){if(1&n&&(e=l(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var t in e)l.d(r,t,function(n){return e[n]}.bind(null,t));return r},l.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(n,"a",n),n},l.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},l.p="";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=n,i=i.slice();for(var u=0;u<i.length;u++)n(i[u]);var s=c;a.push([128,0]),r()}({122:function(e,n,r){var t=r(19),o=r(123);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1},l=(t(o,a),o.locals?o.locals:{});e.exports=l},123:function(e,n,r){(n=r(20)(!1)).push([e.i,".user-info{\r\n    width: 100%;\r\n}",""]),e.exports=n},128:function(e,n,r){"use strict";r.r(n);var t=r(0),o=r.n(t),a=r(18),l=r(16),i=r(17),c=r(33),u=r(45),s=r(13),f=r(14),d=r(35);function m(e){return{type:"PUT_FOLLOW_FEEDBACK",feedback:e}}var p=Object(s.c)({profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return"PUT_PROFILE_INFO"===n.type?n.profileData:e},loadedBlog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if("PUT_MORE_BLOG"===n.type){if(e.blogList){var r=e.blogList.concat(n.blog.blogList);return Object.assign({},n.blog,{blogList:r})}return n.blog}return e},followFeedback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return"PUT_FOLLOW_FEEDBACK"===n.type?n.feedback:e}}),g=r(2),b=r.n(g),h=r(4),v=r(7),w=r.n(v),E=b.a.mark(_),x=b.a.mark(N),y=b.a.mark(I),O=b.a.mark(j),k=b.a.mark(L);function _(e){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.userName,t.next=3,w.a.get("http://localhost:3000/api/profile/getProfileInfo/".concat(n));case 3:return r=t.sent,console.log(r.data),t.next=7,Object(h.a)({type:"PUT_PROFILE_INFO",profileData:r.data});case 7:case"end":return t.stop()}}),E)}function N(e){var n,r,t;return b.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.userName,r=e.pageIndex,o.next=3,w.a.get("http://localhost:3000/api/profile/loadMore/".concat(n,"/").concat(r));case 3:return t=o.sent,o.next=6,Object(h.a)({type:"PUT_MORE_BLOG",blog:t.data.data});case 6:case"end":return o.stop()}}),x)}function I(e){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.userId,t.next=3,w.a.post("http://localhost:3000/api/profile/follow",{userId:n},{withCredentials:!0});case 3:return r=t.sent,console.log(r.data),t.next=7,Object(h.a)(m(r.data));case 7:case"end":return t.stop()}}),y)}function j(e){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.userId,t.next=3,w.a.post("http://localhost:3000/api/profile/unfollow",{userId:n},{withCredentials:!0});case 3:return r=t.sent,console.log(r.data),t.next=7,Object(h.a)(m(r.data));case 7:case"end":return t.stop()}}),O)}function L(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.c)("GET_PROFILE_ASYNC",_);case 2:return e.next=4,Object(h.c)("GET_MORE_BLOG_ASYNC",N);case 4:return e.next=6,Object(h.c)("SEND_FOLLOW_REQUEST",I);case 6:return e.next=8,Object(h.c)("SEND_UNFOLLOW_REQUEST",j);case 8:console.log("profile saga");case 9:case"end":return e.stop()}}),k)}r(22),r(40),r(122);var S=Object(d.a)(),C=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,F=Object(s.e)(p,C(Object(s.a)(S)));S.run(L);var M=Object(f.b)((function(e){var n=null,r=null;return e.profile&&e.profile.blog&&(e.loadedBlog&&e.loadedBlog.blogList?(n=e.profile.blog.blogList.concat(e.loadedBlog.blogList),r={pageIndex:e.loadedBlog.pageIndex,pageSize:e.loadedBlog.pageSize,count:e.loadedBlog.count}):n=e.profile.blog.blogList),{followFeedback:e.followFeedback,blog:n,blogInfo:r||e.profile.blog,userInfo:e.profile&&e.profile.fan&&e.profile.following&&e.profile.blog?{fans:e.profile.fan,following:e.profile.following,user:e.profile.user,blogCount:e.profile.blog.count}:null}}),(function(e){return{getProfileInfo:function(n){e(function(e){return{type:"GET_PROFILE_ASYNC",userName:e}}(n))},loadMore:function(n,r){var t;e({type:"GET_MORE_BLOG_ASYNC",pageIndex:(t={userName:n,pageIndex:r}).pageIndex,userName:t.userName})},follow:function(n){e(function(e){return{type:"SEND_FOLLOW_REQUEST",userId:e}}(n))},unfollow:function(n){e(function(e){return{type:"SEND_UNFOLLOW_REQUEST",userId:e}}(n))}}}))((function(e){var n=e.getProfileInfo,r=e.blog,a=e.userInfo,s=e.loadMore,f=e.blogInfo,d=e.followFeedback,p=e.follow,g=e.unfollow;return Object(t.useEffect)((function(){var e=location.pathname.split("/");n(e[e.length-1]),d&&(0===d.errno?(alert("success"),m(null)):(alert("fail"),m(null)))}),[d]),o.a.createElement(o.a.Fragment,null,o.a.createElement(l.a,null),o.a.createElement("div",{className:"content"},!r&&o.a.createElement("div",{className:"loading"},"Loading"),r&&0===r.length&&o.a.createElement("div",{className:"no-blog"},"暂无BLOG"),r&&0!==r.length&&o.a.createElement(c.a,{loadMore:s,createdOffset:0,blogInfo:f,blog:r,userName:a.user.userName}),o.a.createElement("div",{style:{width:"30%"}},a&&o.a.createElement(u.a,{userInfo:a,follow:p,unfollow:g}))),o.a.createElement(i.a,null))}));Object(a.render)(o.a.createElement(f.a,{store:F},o.a.createElement(M,null)),document.getElementById("root"),(function(){console.log("profile page")}))},16:function(e,n,r){"use strict";var t=r(8),o=r.n(t),a=r(9),l=r.n(a),i=r(10),c=r.n(i),u=r(11),s=r.n(u),f=r(12),d=r.n(f),m=r(0),p=r.n(m),g=r(39),b=r(31),h=r(38),v=r(37),w=function(e){function n(e){return o()(this,n),c()(this,s()(n).call(this,e))}return d()(n,e),l()(n,[{key:"render",value:function(){return p.a.createElement("div",{className:"header"},p.a.createElement("ul",null,p.a.createElement("li",null,p.a.createElement("h1",null,p.a.createElement("a",{href:"/"},"微博"))),p.a.createElement("li",null,p.a.createElement("a",{href:"/"},p.a.createElement(g.a,null),"首页")),p.a.createElement("li",null,p.a.createElement("a",{href:"/profile"},p.a.createElement(b.a,null),"我的空间")),p.a.createElement("li",null,p.a.createElement("a",{href:"/square"},p.a.createElement(h.a,null),"广场")),p.a.createElement("li",null,p.a.createElement("a",{href:"/setting"},p.a.createElement(v.a,null),"设置"))))}}]),n}(p.a.Component);n.a=w},17:function(e,n,r){"use strict";var t=r(8),o=r.n(t),a=r(9),l=r.n(a),i=r(10),c=r.n(i),u=r(11),s=r.n(u),f=r(12),d=r.n(f),m=r(0),p=r.n(m),g=function(e){function n(e){return o()(this,n),c()(this,s()(n).call(this,e))}return d()(n,e),l()(n,[{key:"render",value:function(){return p.a.createElement("div",{className:"footer"},"Footer")}}]),n}(p.a.Component);n.a=g},22:function(e,n,r){var t=r(19),o=r(23);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1},l=(t(o,a),o.locals?o.locals:{});e.exports=l},23:function(e,n,r){(n=r(20)(!1)).push([e.i,"/* http://meyerweb.com/eric/tools/css/reset/\r\n   v2.0 | 20110126\r\n   License: none (public domain)\r\n*/\r\n\r\nhtml, body, div, span, applet, object, iframe,\r\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\r\na, abbr, acronym, address, big, cite, code,\r\ndel, dfn, em, img, ins, kbd, q, s, samp,\r\nsmall, strike, strong, sub, sup, tt, var,\r\nb, u, i, center,\r\ndl, dt, dd, ol, ul, li,\r\nfieldset, form, label, legend,\r\ntable, caption, tbody, tfoot, thead, tr, th, td,\r\narticle, aside, canvas, details, embed,\r\nfigure, figcaption, footer, header, hgroup,\r\nmenu, nav, output, ruby, section, summary,\r\ntime, mark, audio, video {\r\n    margin: 0;\r\n    padding: 0;\r\n    border: 0;\r\n    font-size: 100%;\r\n    font: inherit;\r\n    vertical-align: baseline;\r\n}\r\n/* HTML5 display-role reset for older browsers */\r\narticle, aside, details, figcaption, figure,\r\nfooter, header, hgroup, menu, nav, section {\r\n    display: block;\r\n}\r\nbody {\r\n    line-height: 1;\r\n    font-family: Microsoft YaHei;\r\n}\r\nol, ul {\r\n    list-style: none;\r\n}\r\nblockquote, q {\r\n    quotes: none;\r\n}\r\nblockquote:before, blockquote:after,\r\nq:before, q:after {\r\n    content: '';\r\n    content: none;\r\n}\r\ntable {\r\n    border-collapse: collapse;\r\n    border-spacing: 0;\r\n}\r\n\r\n.header{\r\n    background-color: rgb(251,251,251);\r\n    box-shadow: 0 0 10px rgb(170,170,170);\r\n    padding: 1.5em 1em;\r\n    min-width: 1000px;\r\n}\r\n\r\n.header a{\r\n    color: rgb(51,51,51);\r\n}\r\n.header a:hover{\r\n    color:rgb(250,125,60);\r\n}\r\n\r\n.header ul{\r\n    display: flex;\r\n    flex-flow: row nowrap;\r\n}\r\n\r\n.header ul li{\r\n    margin-right: 1.5em;\r\n}\r\na{\r\n    text-decoration: none;\r\n}\r\n\r\n.load-more{\r\n    width: 100%;\r\n    margin-bottom: 1em;\r\n    background-color: #fff;\r\n    border-radius: 3px;\r\n    padding: 1em 1em;\r\n    box-sizing: border-box;\r\n    text-align: center;\r\n    cursor: pointer;\r\n}\r\n\r\n.content{\r\n    position: relative;\r\n    max-width: 1024px;\r\n    min-width: 1000px;\r\n    margin: 0 auto;\r\n    /*background-color: rgba(150,50,70,0.3);*/\r\n    display: flex;\r\n    flex-flow: row wrap;\r\n    padding: 1em 1em;\r\n    box-sizing: border-box;\r\n    border-left:1px solid #eee;\r\n    border-right:1px solid #eee;\r\n}\r\n\r\n.error{\r\n    height: 90vh;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.error span{\r\n    cursor: pointer;\r\n    color: cornflowerblue;\r\n}\r\n\r\n.footer{\r\n    padding: 1.5em 1em;\r\n    color:#fff;\r\n    text-align: center;\r\n    background-color: rgb(0,0,0);\r\n    min-width: 1000px;\r\n}",""]),e.exports=n},25:function(e,n,r){"use strict";function t(){for(var e,n,r,t=document.cookie.split("; "),o=0;o<t.length;o++){var a=t[o].split("=");"user"==a[0]&&(e=a[1]),"nick"==a[0]&&(n=a[1]),"pic"==a[0]&&(r=a[1])}return{userName:e,nickname:n,picture:r}}r.d(n,"a",(function(){return t}))},33:function(e,n,r){"use strict";var t=r(0),o=r.n(t),a=r(56),l=r(57),i=(r(52),r(14));function c(e){var n=e.handleReply,r=e.username,t=e.nickname,i=e.content;return o.a.createElement("div",{className:"blog"},o.a.createElement("div",{className:"blog-userinfo"},o.a.createElement("a",{href:"/profile/".concat(e.username)},o.a.createElement(a.a,{src:e.picture,size:"large"})),o.a.createElement("div",{style:{marginLeft:"1em"}},o.a.createElement("div",{style:{marginBottom:"0.5em"}},o.a.createElement("a",{href:"/profile"},e.nickname)),o.a.createElement("div",null,e.formatedDate))),o.a.createElement("div",{className:"blog-content",dangerouslySetInnerHTML:{__html:e.formatContent}}),o.a.createElement("div",{className:"blog-img"},o.a.createElement("img",{src:e.img,alt:""})),n&&o.a.createElement("div",{className:"blog-function"},o.a.createElement("a",{href:"/",onClick:function(e){e.preventDefault(),n(e,t,r,i)}},o.a.createElement(l.a,null)," 回复")))}n.a=Object(i.b)((function(e,n){return{}}),(function(e){return{}}))((function(e){var n=e.blogInfo,r=n.count,t=n.pageIndex,a=n.pageSize,l=e.loadMore,i=e.createdOffset,u=e.newCreatedBlog,s=e.handleReply,f=e.userName;return o.a.createElement("div",{className:"blog-list"},i>0&&u.map((function(e){return o.a.createElement(c,{key:e.data.id,username:e.data.user.userName,nickname:e.data.user.nickname,formatedDate:e.data.createdAt,content:e.data.content,picture:e.data.user.picture,img:e.data.image,handleReply:s,formatContent:e.data.formatContent})})),e.blog&&e.blog.map((function(e){return o.a.createElement(c,{key:e.id,username:e.user.userName,nickname:e.user.nickName,formatedDate:e.createdAt,content:e.content,picture:e.user.picture,img:e.image,handleReply:s,formatContent:e.formatContent})})),t*a+a<r&&o.a.createElement("div",{className:"load-more",onClick:function(e){console.log("im clicked"),f?l(f,parseInt(t)+1):l(parseInt(t)+1,i)}},"加载更多"))}))},40:function(e,n,r){var t=r(19),o=r(41);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1},l=(t(o,a),o.locals?o.locals:{});e.exports=l},41:function(e,n,r){(n=r(20)(!1)).push([e.i,"\r\n\r\n\r\n\r\n\r\n.input{\r\n    width: 68%;\r\n    box-shadow: 0 0 10px rgb(170,170,170);\r\n    border-radius: 3px;\r\n    background-color: #fff;\r\n    padding: 0.5em;\r\n    box-sizing: border-box;\r\n    margin-bottom: 1em;\r\n}\r\n\r\n#textarea{\r\n    font-size: 1.5em;\r\n    resize:none;\r\n    width: 100%;\r\n    padding: 0.3em;\r\n    box-sizing: border-box;\r\n    margin-bottom: 0.3em;\r\n    box-shadow: inset 0 0 3px rgb(170,170,170);\r\n}\r\n\r\n#textarea:focus{\r\n    outline-color:rgb(250,125,60);\r\n    box-shadow: none;\r\n}\r\n#publish{\r\n    color: #fff;\r\n    border:none;\r\n    float: right;\r\n    padding: 0.5em 1.5em;\r\n    border-radius: 3px;\r\n    font-weight: bold;\r\n}\r\n.no-input{\r\n    background-color:rgba(250,125,60,0.5);\r\n}\r\n.has-input{\r\n    background-color:rgba(250,125,60,1);\r\n    cursor: pointer;\r\n}\r\n\r\n.user-info{\r\n    background-color: #fff;\r\n    box-sizing: border-box;\r\n    width: 30%;\r\n    border-radius: 3px;\r\n    box-shadow: 0 0 10px rgb(170,170,170);\r\n    margin-left: 1em;\r\n    display: flex;\r\n    flex-flow: column nowrap;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.avatar{\r\n    width: 5em;\r\n    height: 5em;\r\n    border-radius: 50%;\r\n    overflow: hidden;\r\n    margin: 1em 0;\r\n}\r\n.avatar img{\r\n    object-fit: cover;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.fan-follows {\r\n    display: flex;\r\n    flex-flow:row nowrap;\r\n    margin: 1em 0;\r\n}\r\n.fan-follows div span{\r\n    display: block;\r\n    border-right: 1px solid rgb(170,170,170);\r\n    text-align: center;\r\n    padding:0 0.5em;\r\n}\r\n.fan-follows div span:nth-of-type(even){\r\n    padding-top: 0.2em;\r\n    color:#aaa;\r\n}\r\n\r\n.fan-follows div span:nth-of-type(odd) a{\r\n    color:#000;\r\n}\r\n.fan-follows div span:nth-of-type(odd) a:hover{\r\n    color:rgba(250,125,60,1);\r\n}\r\n\r\n.follow-button{\r\n    border-radius:3px;\r\n    padding: 0.5em 1em;\r\n    margin-bottom: 1em;\r\n    cursor: pointer;\r\n    color:#fff;\r\n    font-weight: bold;\r\n    background-color:rgba(250,125,60,1);\r\n}\r\n\r\n.blog-list{\r\n    width: 68%;\r\n    min-height: 80vh;\r\n}\r\n\r\n.loading{\r\n    width: 68%;\r\n    min-height: 100vh;\r\n}\r\n/*if no blog posted*/\r\n.no-blog{\r\n    width: 68%;\r\n    min-height: 80vh;\r\n    display: flex;\r\n    flex-flow:row nowrap;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n.blog{\r\n    width: 100%;\r\n    margin-bottom: 1em;\r\n    background-color: #fff;\r\n    border-radius: 3px;\r\n    padding: 1.5em 1em;\r\n    box-sizing: border-box;\r\n    box-shadow: 0 0 10px rgb(170,170,170);\r\n}\r\n.blog a{\r\n    color:rgb(100,100,100);\r\n}\r\n.blog-userinfo{\r\n    display: flex;\r\n    flex-flow: row nowrap;\r\n}\r\n.blog-content{\r\n    margin: 1em 0;\r\n    word-wrap: break-word;\r\n}\r\n.blog-content a{\r\n    color:rgb(24,144,255);\r\n}\r\n.blog-img{\r\n    width: 100%;\r\n}\r\n.blog-img img{\r\n    max-width: 100%;\r\n}\r\n\r\n.blog-function {\r\n\r\n}\r\n.blog-function a{\r\n    float: right;\r\n}\r\n\r\n.tribute-container{\r\n    padding: 0.5em;\r\n    box-shadow: 0 0 3px rgb(170,170,170);\r\n    background-color: white;\r\n    font-size: 1em;\r\n}\r\n\r\n.backBtn{\r\n    position:fixed;\r\n    right:4em;\r\n    bottom: 4.5em;\r\n    background-color: #000;\r\n    color:#fff;\r\n    border-radius: 10px;\r\n    z-index: 1000;\r\n    display: none;\r\n    width: 3em;\r\n    height: 3em;\r\n    text-align: center;\r\n    line-height: 3em;\r\n}\r\n\r\n\r\n\r\n",""]),e.exports=n},45:function(e,n,r){"use strict";var t=r(15),o=r.n(t),a=r(0),l=r.n(a),i=r(14),c=r(25);function u(e){var n=e.followed,r=e.follow,t=e.unfollow,o=e.userId;return l.a.createElement("div",{className:"follow-button",onClick:function(e){Object(c.a)().userName?n?t(o):r(o):location.href="/login"}},n&&l.a.createElement("span",null,"取消关注"),!n&&l.a.createElement("span",null,"关注"))}n.a=Object(i.b)((function(e,n){return{}}),(function(e,n){return{}}))((function(e){var n=e.userInfo.user,r=n.nickname,t=n.picture,i=n.userName,s=n.isMe,f=n.id,d=e.userInfo.fans.count,m=e.userInfo.following.count,p=e.userInfo.blogCount,g=e.userInfo.fans,b=Object(a.useState)(!1),h=o()(b,2),v=h[0],w=h[1],E=e.follow,x=e.unfollow;return Object(a.useEffect)((function(){var e=Object(c.a)().userName;if(g){var n=g.list.some((function(n){return n.user.userName===e}));w(!!n),console.log(v)}}),[e.userInfo]),l.a.createElement("div",{className:"user-info"},e.userInfo&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"avatar"},l.a.createElement("a",{href:"/profile/".concat(i)},l.a.createElement("img",{src:"".concat(t),alt:"",title:"".concat(r)}))),l.a.createElement("div",{style:{fontWeight:"bold"}},l.a.createElement("a",{href:"/profile/".concat(i)},r)),l.a.createElement("div",{className:"fan-follows"},l.a.createElement("div",null,l.a.createElement("span",null,l.a.createElement("a",{href:"/following/".concat(i)},m)),l.a.createElement("span",null,"关注")),l.a.createElement("div",null,l.a.createElement("span",null,l.a.createElement("a",{href:"/follower/".concat(i)},d)),l.a.createElement("span",null,"粉丝")),l.a.createElement("div",null,l.a.createElement("span",null,l.a.createElement("a",{href:"/profile/".concat(i)},p)),l.a.createElement("span",null,"微博"))),!s&&l.a.createElement(u,{followed:v,follow:E,unfollow:x,userId:f})))}))}});